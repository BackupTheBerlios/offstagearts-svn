<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
<meta name="description" content="This cryptography tutorial helps you understand: 'keytool' generating a key pair; 'keytool' exporting the from PrivateKeyEntry; 'keytool' displaying certificate info; 'OpenSSL' viewing certificate details; 'DumpKey.java' dumping key pair out of 'keytool' keystore files; 'OpenSSL' converting dumped key pair from binary to Base64; 'OpenSSL' viewing converted key pair. "/> 
<meta name="keywords" content="Cryptography, Digital Security, Free, Tutorial, Book, , OpenSSL, keytool, Keys, Migrating, keystore, Base64, PEM"/>
<title>Cryptography Tutorials - Herong's Tutorial Notes - Migrating Keys from  'keytool' to 'OpenSSL'</title>
<script type="text/javascript" src="_head.js"></script>
<link rel="stylesheet" type="text/css" href="book.css"/>
</head><body>

<div class="hy_body">
<table class="frame" cellspacing="0" cellpadding="0">

<tr><td class="frame_top" colspan="3">
<script type="text/javascript">writeTop("Crypto");</script>
</td></tr>

<tr><td class="frame_left">
<script type="text/javascript">writeLeft("Crypto");</script>
</td>
<td class="frame_center">

<table class="page_border" cellspacing="0" cellpadding="0">
<tr><td></td>
<td>

<table class="page" cellspacing="0" cellpadding="0">
<tr><td>

<table cellspacing="0" cellpadding="0" border="0">
<tr><td align="left" colspan="3"><b>Cryptography Tutorials - Herong's Tutorial Notes</b></td></tr>
<tr><td align="left">Dr. Herong Yang, Version 4.00</td>
<td align="center"></td>
<td align="right">
<script type="text/javascript">writeMenu("Crypto");</script>
</td></tr>
<tr><td class="page_line" colspan="3"><img height="1" width="100%" src="dot.gif" alt=""/></td></tr>
<tr><td class="body" colspan="3">
<!-- begin of body -->

<script type="text/javascript">adsBottom();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

<table><tr><td class="page_sw">

<script type="text/javascript">adsLeft();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
<script type="text/javascript">writePageLeft("http://www.herongyang.com/crypto");</script>

</td><td class="page_se">

<div class="gg_search"><p><form method="get" action="http://www.google.com/custom" target="_top">
<input type="hidden" name="domains" value="www.herongyang.com"></input>
<input type="hidden" name="client" value="pub-8765173615603734"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"></input>
<input type="hidden" name="hl" value="en"></input>
<input type="text" name="q" size="38" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
<input type="radio" name="sitesearch" value="www.herongyang.com" checked="checked"></input>
<font size="-1" color="#000000">This site</font>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif"
border="0" alt="Google" style="vertical-align: middle"/></a>
</form><p></div>



<p class="chapter_title" id="Migrating_Keys_keytool_to_OpenSSL.html">
Migrating Keys from  'keytool' to 'OpenSSL'
</p>


<p class="part_list">Part: &nbsp; 
<a href="Migrating_Keys_keytool_to_OpenSSL.html">1</a>&nbsp;
<a href="Migrating_Keys_keytool_to_OpenSSL_2.html">2</a>&nbsp;
<a href="Migrating_Keys_keytool_to_OpenSSL_3.html">3</a>&nbsp;
<span class="part_list_curr">4</span>&nbsp;
</p>

<p><i>(Continued from previous part...)</i></p>

<p>
The last step to make my herong.key file to meet PEM format standard is
to add a header line and a footer line with a text editor:
</p>
<pre class="block_source">
-----BEGIN PRIVATE KEY-----
MIIBSwIBADCCASwGByqGSM44BAEwggEfAoGBAP1/U4EddRIpUt9KnC7s5Of2EbdS
...
g9/hWuWfBpKLZl6Ae1UlZAFMO/7PSSoEFgIUSVbo98XAZDN9RZoZ+li3kIKVEbk=
-----END PRIVATE KEY-----
</pre>

<p>
Now I got my private and public key pair converted from a binary format to the PEM format
in the file called herong.key. Remember my key pair was generated by "keytool". 
</p>

<p>
The next thing I want to do is view this key pair with the "openssl dsa" command
as described in the next section.
</p>


<p class="section_title">
"OpenSSL" Viewing "keytool" Keys
</p>

<p>
After going through so much trouble of dumping the key pair out of the keystore file, 
encoding it with Base64, and making it to meet PEM file standard, finally 
I can view it with the "openssl dsa" command now:
</p>
<pre class="block_source">
>openssl dsa -in herong.key -text
read DSA key
Private-Key: (1024 bit)
priv:
    49:56:e8:f7:c5:c0:64:33:7d:45:9a:19:fa:58:b7:
    90:82:95:11:b9
pub:
    00:b0:61:2b:c1:88:0e:19:66:58:37:b5:bc:0f:78:
    88:f7:79:b5:fa:6c:cb:6c:b2:86:44:d8:b2:15:13:
    e3:09:dd:9c:5a:52:02:4a:fb:1c:30:e8:2b:b5:45:
    8f:88:5a:57:a9:1f:c0:b8:3d:1c:a1:a9:6f:20:76:
    a7:c0:eb:5e:df:bf:87:84:14:02:53:d5:87:c9:3a:
    13:9d:e8:45:4f:c6:2d:48:44:e2:80:18:63:e4:40:
    a1:f0:2c:e4:d2:86:34:8d:dd:93:92:42:1a:19:1d:
    0e:44:f6:a2:6d:94:1a:ed:d7:d2:94:7e:0b:26:88:
    a4:cb:c4:88:5b:56:49:2e:80
P:
    00:fd:7f:53:81:1d:75:12:29:52:df:4a:9c:2e:ec:
    e4:e7:f6:11:b7:52:3c:ef:44:00:c3:1e:3f:80:b6:
    51:26:69:45:5d:40:22:51:fb:59:3d:8d:58:fa:bf:
    c5:f5:ba:30:f6:cb:9b:55:6c:d7:81:3b:80:1d:34:
    6f:f2:66:60:b7:6b:99:50:a5:a4:9f:9f:e8:04:7b:
    10:22:c2:4f:bb:a9:d7:fe:b7:c6:1b:f8:3b:57:e7:
    c6:a8:a6:15:0f:04:fb:83:f6:d3:c5:1e:c3:02:35:
    54:13:5a:16:91:32:f6:75:f3:ae:2b:61:d7:2a:ef:
    f2:22:03:19:9d:d1:48:01:c7
Q:
    00:97:60:50:8f:15:23:0b:cc:b2:92:b9:82:a2:eb:
    84:0b:f0:58:1c:f5
G:
    00:f7:e1:a0:85:d6:9b:3d:de:cb:bc:ab:5c:36:b8:
    57:b9:79:94:af:bb:fa:3a:ea:82:f9:57:4c:0b:3d:
    07:82:67:51:59:57:8e:ba:d4:59:4f:e6:71:07:10:
    81:80:b4:49:16:71:23:e8:4c:28:16:13:b7:cf:09:
    32:8c:c8:a6:e1:3c:16:7a:8b:54:7c:8d:28:e0:a3:
    ae:1e:2b:b3:a6:75:91:6e:a3:7f:0b:fa:21:35:62:
    f1:fb:62:7a:01:24:3b:cc:a4:f1:be:a8:51:90:89:
    a8:83:df:e1:5a:e5:9f:06:92:8b:66:5e:80:7b:55:
    25:64:01:4c:3b:fe:cf:49:2a
writing DSA key
-----BEGIN DSA PRIVATE KEY-----
MIIBvAIBAAKBgQD9f1OBHXUSKVLfSpwu7OTn9hG3UjzvRADDHj+AtlEmaUVdQCJR
+1k9jVj6v8X1ujD2y5tVbNeBO4AdNG/yZmC3a5lQpaSfn+gEexAiwk+7qdf+t8Yb
+DtX58aophUPBPuD9tPFHsMCNVQTWhaRMvZ1864rYdcq7/IiAxmd0UgBxwIVAJdg
UI8VIwvMspK5gqLrhAvwWBz1AoGBAPfhoIXWmz3ey7yrXDa4V7l5lK+7+jrqgvlX
TAs9B4JnUVlXjrrUWU/mcQcQgYC0SRZxI+hMKBYTt88JMozIpuE8FnqLVHyNKOCj
rh4rs6Z1kW6jfwv6ITVi8ftiegEkO8yk8b6oUZCJqIPf4VrlnwaSi2ZegHtVJWQB
TDv+z0kqAoGBALBhK8GIDhlmWDe1vA94iPd5tfpsy2yyhkTYshUT4wndnFpSAkr7
HDDoK7VFj4haV6kfwLg9HKGpbyB2p8DrXt+/h4QUAlPVh8k6E53oRU/GLUhE4oAY
Y+RAofAs5NKGNI3dk5JCGhkdDkT2om2UGu3X0pR+CyaIpMvEiFtWSS6AAhRJVuj3
xcBkM31Fmhn6WLeQgpURuQ==
-----END DSA PRIVATE KEY-----
</pre>

<p>
Wonderful! Here is what I learned from this exercise:
</p>
<ul>
<li>Private and public key pairs generated by "keytool" 
can be used by "OpenSSL".
</li>
<li>Private and public key pairs stored in "keystore" files
can be dumped out. But I have to write a Java program, DumpKey.java,
to do this.
</li>
<li>My DumpKey.java program does not write the key in PEM format. 
Extra steps are needed to convert the dumped binary keys to in PEM format.
</li>
</ul>

<p>
My private and public key pair, herong.key, dumped and converted from the "keytool"
keystore file is now ready to be used by "OpenSSL" for signing any documents.
</p>


<p class="section_title">
Conclusion
</p>

<ul>
<li>"keytool -genkeypair" command does two things: generating a DSA key pair and generating the self-signed certificate.
</li>
<li>"keytool -exportcert" command only exports the self-signed certificate from a PrivateKeyEntry in a keystore.
</li>
<li>"DumpKey.java" program dumps the key pair into a binary format from a PrivateKeyEntry in a keystore.
</li>
<li>"openssl enc" command can be used to perform Base64 encoding.
</li>
<li>PEM format requires a header line and footer line in the Base64 encoded file.
</li>
<li>Key pairs generated with "keytool" are compatible with "OpenSSL".
</li>
</ul>





<p class="part_list">Part: &nbsp; 
<a href="Migrating_Keys_keytool_to_OpenSSL.html">1</a>&nbsp;
<a href="Migrating_Keys_keytool_to_OpenSSL_2.html">2</a>&nbsp;
<a href="Migrating_Keys_keytool_to_OpenSSL_3.html">3</a>&nbsp;
<span class="part_list_curr">4</span>&nbsp;
</p>

<script type="text/javascript">adsTop();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

<script type="text/javascript">showPageFooter("http://www.herongyang.com/crypto", "Migrating_Keys_keytool_to_OpenSSL.html");</script>

</td></tr></table>

<!-- end of body -->
<p></p>
<script type="text/javascript">adsBottom();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

</td></tr>
<tr><td class="page_line" colspan="3"><img height="1" width="100%" src="dot.gif" alt=""/></td></tr>
<tr><td align="left">Dr. Herong Yang, updated in 2007</td>
<td align="center"></td>
<td align="right"><script type="text/javascript">writeMenu("Crypto");</script></td>
</tr>
<tr><td align="left" colspan="3"><b>Cryptography Tutorials - Herong's Tutorial Notes - Migrating Keys from  'keytool' to 'OpenSSL'</b></td></tr>
</table>

</td></tr>
</table>

</td>
<td rowspan="1"><img height="100%" width="1" src="dot.gif" alt=""/></td></tr>
</table>

</td>

<td class="frame_right">
<script type="text/javascript">writeRight("Crypto");</script>
</td></tr>
<tr><td class="frame_bottom" colspan="3">
<script type="text/javascript">writeBottom("Crypto");</script>
</td></tr>
</table>
</div>
</body></html>

