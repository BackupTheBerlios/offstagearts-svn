<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
<meta name="description" content="This cryptography tutorial helps you understand: Setting Up OpenSSL to be used as a CA; Using OpenSSL to generate CA's key pair; Using OpenSSL to self-sign CA's certificate; Using keytool to generate a CSR; Using OpenSSL to sign a CSR; Using keytool to import signed certificates."/> 
<meta name="keywords" content="Cryptography, Digital Security, Free, Tutorial, Book, , OpenSSL, keytool, CSR, Sign, keystore, Certificate"/>
<title>Cryptography Tutorials - Herong's Tutorial Notes - 'OpenSSL' Signing CSR Generated by 'keytool'</title>
<script type="text/javascript" src="_head.js"></script>
<link rel="stylesheet" type="text/css" href="book.css"/>
</head><body>

<div class="hy_body">
<table class="frame" cellspacing="0" cellpadding="0">

<tr><td class="frame_top" colspan="3">
<script type="text/javascript">writeTop("Crypto");</script>
</td></tr>

<tr><td class="frame_left">
<script type="text/javascript">writeLeft("Crypto");</script>
</td>
<td class="frame_center">

<table class="page_border" cellspacing="0" cellpadding="0">
<tr><td></td>
<td>

<table class="page" cellspacing="0" cellpadding="0">
<tr><td>

<table cellspacing="0" cellpadding="0" border="0">
<tr><td align="left" colspan="3"><b>Cryptography Tutorials - Herong's Tutorial Notes</b></td></tr>
<tr><td align="left">Dr. Herong Yang, Version 4.00</td>
<td align="center"></td>
<td align="right">
<script type="text/javascript">writeMenu("Crypto");</script>
</td></tr>
<tr><td class="page_line" colspan="3"><img height="1" width="100%" src="dot.gif" alt=""/></td></tr>
<tr><td class="body" colspan="3">
<!-- begin of body -->

<script type="text/javascript">adsBottom();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

<table><tr><td class="page_sw">

<script type="text/javascript">adsLeft();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
<script type="text/javascript">writePageLeft("http://www.herongyang.com/crypto");</script>

</td><td class="page_se">

<div class="gg_search"><p><form method="get" action="http://www.google.com/custom" target="_top">
<input type="hidden" name="domains" value="www.herongyang.com"></input>
<input type="hidden" name="client" value="pub-8765173615603734"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1;"></input>
<input type="hidden" name="hl" value="en"></input>
<input type="text" name="q" size="38" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
<input type="radio" name="sitesearch" value="www.herongyang.com" checked="checked"></input>
<font size="-1" color="#000000">This site</font>
<input type="radio" name="sitesearch" value=""></input>
<font size="-1" color="#000000">Web</font>
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif"
border="0" alt="Google" style="vertical-align: middle"/></a>
</form><p></div>



<p class="chapter_title" id="OpenSSL_Signing_keytool_CSR.html">
'OpenSSL' Signing CSR Generated by 'keytool'
</p>


<p class="part_list">Part: &nbsp; 
<a href="OpenSSL_Signing_keytool_CSR.html">1</a>&nbsp;
<span class="part_list_curr">2</span>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_3.html">3</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_4.html">4</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_5.html">5</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_6.html">6</a>&nbsp;
</p>

<p><i>(Continued from previous part...)</i></p>

<p>
Want to see some details about my private key? Run the "openssl rsa" command as shown below:
</p>
<pre class="block_source">
>openssl rsa -in herong.key -text
Enter pass phrase for herong.key: keypass
Private-Key: (2048 bit)
modulus:
    00:ba:a3:a2:d1:ab:9b:9f:26:e6:b5:79:b4:52:11:
    ...
publicExponent: 65537 (0x10001)
privateExponent:
    00:9d:62:da:2d:57:3a:2f:36:5d:bc:d0:f9:97:6f:
    ...
exponent1:
    27:6c:ec:a2:b8:78:5f:55:67:b9:47:eb:3e:25:5d:
    ...
exponent2:
    00:a9:17:88:e5:d7:63:c3:7b:f8:6f:57:78:de:53:
    ...
coefficient:
    30:f5:86:b6:81:ad:1d:35:2c:1a:c1:ba:b9:d9:ab:
    ...
writing RSA key
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAuqOi0aubnybmtXm0UhE47JSDcCrc/NGtfbtJdk+9...
    ...
-----END RSA PRIVATE KEY-----
</pre>

<p>
Now I am ready to generate a self-signed public key certificate based on my private key file
as described in the section below.
</p>


<p class="section_title">
"OpenSSL" Self-signing CA's Public Key Certificate
</p>

<p>
As you know, my key file actually contains a pair of keys: my private key and my public key.
My private key will be used only by myself to sign any documents. My public key will be used whoever 
receives the document signed by me to verify the signature. 
</p>

<p>
To give out my public key, I need to be put it into a certificate with my name, and signed
by my own private key. This process is call generating a self-signed public key certificate.
OpenSSL can do this in a single command "openssl req -new -x509" as shown in the following
command window session:
</p>
<pre class="block_source">
>openssl req -new -key herong.key -x509 -days 3650 
   -out herong.crt -config openssl.cnf
   
Enter pass phrase for herong.key: keypass
You are about to be asked to enter information that will be 
incorporated into your certificate request.
What you are about to enter is what is called a Distinguished 
Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CA]:
State or Province Name (full name) [HY State]:
Locality Name (eg, city) [HY City]:
Organization Name (eg, company) [HY Company]:
Organizational Unit Name (eg, section) [HY Unit]:
Common Name (eg, YOUR name) [Herong Yang]:
Email Address [herongyang.com]:

>type herong.crt

-----BEGIN CERTIFICATE-----
MIIElzCCA3+gAwIBAgIBADANBgkqhkiG9w0BAQQFADCBkzELMAkGA1UE...
...
KqbxyZS65093ifrC0kmfNCY3cq+vBqdMvpV9
-----END CERTIFICATE-----
</pre>
<p>
Here is what happened:
</p>
<ul>
<li>"req" command is used to generate a certificate signing request or self-signed certificate.
</li>
<li>"-new" option is used to prompt for certificate "subject" information.
</li>
<li>"-key herong.key" option is used to specify my key file containing my private key and public key. Password will be prompted.
</li>
<li>"-x509" option is used to tell "req" to generate self-signed certificate.
</li>
<li>"-days 3650" option is used to make the self-signed certificate valid for 3650 days, about 10 years.
</li>
<li>"-out herong.crt" option is used to tell "req" to store the self-signed certificate in a file called "herong.crt".
</li>
<li>"-config openssl.cnf" option is used to specify the configuration file.
</li>
<li>When you are prompted for distinguished name information, just press Enter key to take the default values.
</li>
<li>"type herong.crt" is Windows command to show the content of "herong.crt".
</li>
</ul>

<p>
Want to see some details about my self-signed certificate? Run the "openssl rsa" as shown below:
</p>
<pre class="block_source">
>openssl x509 -in herong.crt -noout -text
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 0 (0x0)
        Signature Algorithm: md5WithRSAEncryption
        Issuer: C=CA, ST=HY State, L=HY City, O=HY Company,
OU=HY Unit, CN=Herong Yang/emailAddress=herongyang.com
        Validity
            Not Before: Apr 1 14:07:29 2007 GMT
            Not After : Mar 29 14:07:29 2017 GMT
        Subject: C=CA, ST=HY State, L=HY City, O=HY Company,
OU=HY Unit, CN=Herong Yang/emailAddress=herongyang.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (2048 bit)
                Modulus (2048 bit):
                    00:ba:a3:a2:d1:ab:9b:9f:26:e6:b5:79:...
                    ...
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Subject Key Identifier:
                36:7C:F4:4A:A4:9B:C9:B5:C5:F7:09:3F:31:1...
            X509v3 Authority Key Identifier:
                keyid:36:7C:F4:4A:A4:9B:C9:B5:C5:F7:09:3...
                DirName:/C=CA/ST=HY State/L=HY City
/O=HY Company/OU=HY Unit/CN=Herong Yang
/emailAddress=herongyang.com
                serial:00

            X509v3 Basic Constraints:
                CA:TRUE
    Signature Algorithm: md5WithRSAEncryption
        aa:40:06:c0:cb:28:74:b1:1e:c2:a2:89:4f:8d:1e:9c:...
        ...
</pre>

<p>
Notice that a default serial number, 0, is used when self-signing your own CA public key certificate.
</p>

<p><i>(Continued on next part...)</i></p>



<p class="part_list">Part: &nbsp; 
<a href="OpenSSL_Signing_keytool_CSR.html">1</a>&nbsp;
<span class="part_list_curr">2</span>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_3.html">3</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_4.html">4</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_5.html">5</a>&nbsp;
<a href="OpenSSL_Signing_keytool_CSR_6.html">6</a>&nbsp;
</p>

<script type="text/javascript">adsTop();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

<script type="text/javascript">showPageFooter("http://www.herongyang.com/crypto", "OpenSSL_Signing_keytool_CSR.html");</script>

</td></tr></table>

<!-- end of body -->
<p></p>
<script type="text/javascript">adsBottom();</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>

</td></tr>
<tr><td class="page_line" colspan="3"><img height="1" width="100%" src="dot.gif" alt=""/></td></tr>
<tr><td align="left">Dr. Herong Yang, updated in 2007</td>
<td align="center"></td>
<td align="right"><script type="text/javascript">writeMenu("Crypto");</script></td>
</tr>
<tr><td align="left" colspan="3"><b>Cryptography Tutorials - Herong's Tutorial Notes - 'OpenSSL' Signing CSR Generated by 'keytool'</b></td></tr>
</table>

</td></tr>
</table>

</td>
<td rowspan="1"><img height="100%" width="1" src="dot.gif" alt=""/></td></tr>
</table>

</td>

<td class="frame_right">
<script type="text/javascript">writeRight("Crypto");</script>
</td></tr>
<tr><td class="frame_bottom" colspan="3">
<script type="text/javascript">writeBottom("Crypto");</script>
</td></tr>
</table>
</div>
</body></html>

